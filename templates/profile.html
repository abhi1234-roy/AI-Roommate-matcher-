{% extends "base.html" %}

{% block title %}{{ student.name }} - Profile{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 2rem;">
        <div>
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <div style="background: var(--primary); color: white; width: 60px; height: 60px; border-radius: 50%; 
                            display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold;">
                    {{ student.name[0] }}
                </div>
                <div>
                    <h1 style="margin: 0; color: var(--dark);">{{ student.name }}</h1>
                    <p style="margin: 0; color: var(--text-light);">{{ student.email }}</p>
                </div>
            </div>
        </div>
        <a href="{{ url_for('students') }}" class="btn" style="background: var(--border); color: var(--text);">
            Back to Students
        </a>
    </div>
    
    <div class="grid grid-2" style="margin-bottom: 2rem;">
        <div>
            <h3 style="color: var(--dark); margin-bottom: 1rem;">Basic Information</h3>
            <div style="background: #f9fafb; padding: 1.5rem; border-radius: 8px;">
                <p><strong>Age:</strong> {{ student.age }} years</p>
                <p><strong>Gender:</strong> {{ student.gender }}</p>
                <p><strong>Registered:</strong> {{ student.created_at.strftime('%B %d, %Y') }}</p>
            </div>
        </div>
        
        <div>
            <h3 style="color: var(--dark); margin-bottom: 1rem;">Personality</h3>
            <div style="background: #f9fafb; padding: 1.5rem; border-radius: 8px;">
                <p><strong>Type:</strong> {{ ['Introvert', 'Ambivert', 'Extrovert'][student.personality] }}</p>
                <p><strong>Noise Tolerance:</strong> {{ student.noise_tolerance }}/5</p>
                <p><strong>Cleanliness:</strong> {{ student.cleanliness }}/5</p>
            </div>
        </div>
    </div>
    
    <h3 style="color: var(--dark); margin-bottom: 1rem;">Daily Schedule</h3>
    <div class="grid grid-2" style="margin-bottom: 2rem;">
        <div style="background: #e0e7ff; padding: 1.5rem; border-radius: 8px;">
            <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Sleep Schedule</h4>
            <p style="font-size: 1.1rem; margin: 0;">
                {{ ['Early Bird (Before 10 PM)', 'Moderate (10 PM - 12 AM)', 'Night Owl (After 12 AM)'][student.sleep_time] }}
            </p>
        </div>
        <div style="background: #dbeafe; padding: 1.5rem; border-radius: 8px;">
            <h4 style="color: var(--info); margin-bottom: 0.5rem;">Study Time</h4>
            <p style="font-size: 1.1rem; margin: 0;">
                {{ ['Morning (6 AM - 12 PM)', 'Afternoon (12 PM - 5 PM)', 'Evening (5 PM - 9 PM)', 'Night (9 PM - 2 AM)'][student.study_time] }}
            </p>
        </div>
    </div>
    
    <h3 style="color: var(--dark); margin-bottom: 1rem;">Hobbies & Interests</h3>
    <div style="background: #f9fafb; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
        <div style="display: flex; flex-wrap: wrap; gap: 0.75rem;">
            {% for hobby in student.get_hobbies_list() %}
            <span style="background: var(--primary); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem;">
                {{ hobby }}
            </span>
            {% endfor %}
        </div>
    </div>
    
    {% if match %}
    <div style="background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); padding: 2rem; border-radius: 12px;">
        <h3 style="color: var(--success); margin-bottom: 1rem;">Matched Roommate</h3>
        {% if match.student1_id == student.id %}
            {% set roommate = match.student2 %}
        {% else %}
            {% set roommate = match.student1 %}
        {% endif %}
        
        <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 1.5rem; border-radius: 8px;">
            <div>
                <h4 style="margin: 0 0 0.5rem 0;">{{ roommate.name }}</h4>
                <p style="margin: 0; color: var(--text-light);">{{ roommate.email }}</p>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 2rem; font-weight: bold; color: var(--success);">
                    {{ match.compatibility_score }}%
                </div>
                <div style="font-size: 0.875rem; color: var(--text-light);">Compatible</div>
            </div>
        </div>
        
        <div style="background: white; padding: 1.5rem; border-radius: 8px; margin-top: 1rem;">
            <strong>Why you match:</strong>
            <ul style="margin-top: 0.5rem; padding-left: 1.5rem;">
                {% for reason in match.reasons.split(', ') %}
                <li>{{ reason }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% else %}
    <div style="background: #fef3c7; padding: 2rem; border-radius: 12px; text-align: center;">
        <p style="color: var(--warning); font-size: 1.1rem; margin: 0;">
            No roommate assigned yet. Run the matching algorithm to find compatible roommates.
        </p>
        <a href="{{ url_for('match') }}" class="btn btn-primary" style="margin-top: 1rem;">
            Run Matching
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}
